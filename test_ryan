#!/usr/bin/env expect

# Test script for Ryan TUI with token display
set timeout 10

# Start Ryan in TUI mode
spawn ./bin/ryan

# Wait for the prompt to appear
expect "Type a message..."

# Send a test message
send "What is 2+2?\r"

# Wait for response to complete (look for tokens in status bar)
expect {
    "tokens" { puts "\nToken display detected in status bar!" }
    timeout { puts "\nTimeout waiting for tokens display" }
}

# Take a brief pause to see the result
sleep 2

# Exit with Ctrl+C
send "\003"

expect eof
